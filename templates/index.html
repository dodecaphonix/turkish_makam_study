<!DOCTYPE html>
<html>
<head>
    <title>Makam Study</title>
    <style>
        table {
            width: 40%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 2px 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        form {
            padding-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>{{ g.makam_name }}</h1>
    <p>Tonic: {{ g.makam_data["tonic"] }}</p>
    <form action="/">
      <label for="makam">Choose another makam:</label>
      <select name="makam" id="makam" onchange='this.form.submit();'>
        {% for makam in g.all_makams %}
          <option value={{ makam }} {% if makam == g.makam_name %} selected="selected" {% endif %} >{{ makam }}</option>
        {% endfor %}
      </select>
    </form>
    <table>
        <thead>
            <tr>
                <th>Note Name</th>
                <th>Comma</th>
                <th>Absolute Intervals</th>
                {% for jins in g.makam_data["ajnas"] %}
                <th>{{ jins["name"] }} on {{ jins["starting_pitch"] }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for i in range(g.total_commas, -1, -1) %}
            <tr {% if i % 53 in g.fundamental_pitch_commas %} style="background-color:#f0eeff;" {% endif %} >
                <td>{{ g.note_names[i] }}</td>
                <td>{{ i }}</td>
                <td>{{ g.makam_data["absolute_intervals"][i] }}</td>
                {% for jins in g.makam_data["ajnas"] %}
                <td>{{ jins["intervals"][i] }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>